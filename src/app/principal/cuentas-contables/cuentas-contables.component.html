<!-- ingresos-corrientes-detalle.component.html -->
<div class="detalle-container">
  <!-- Header con título y acciones -->
  <div class="header-section">
    <div class="title-section">
      <h2>Ingresos Corrientes | Detalle de operación</h2>
    </div>
    <div class="actions-section">
      <button class="btn-action" (click)="imprimir()" title="Imprimir">
        <i class="icon-print"></i>
      </button>
      <button class="btn-action" (click)="exportarPDF()" title="Exportar PDF">
        <i class="icon-pdf"></i>
      </button>
      <button class="btn-action" (click)="volver()" title="Cerrar">
        <i class="icon-close"></i>
      </button>
    </div>
  </div>

  <!-- Datos Generales -->
  <div class="section-card">
    <div class="section-header">
      <h3>Datos generales</h3>
    </div>
    
    <div class="datos-grid">
      <div class="campo-grupo">
        <div class="campo">
          <label>Liquidación:</label>
          <span>{{ datosGenerales.liquidacion }}</span>
        </div>
        <div class="campo">
          <label>Fecha y hora:</label>
          <span>{{ datosGenerales.fechaHora }}</span>
        </div>
        <div class="campo">
          <label>Fecha sistema:</label>
          <span>{{ datosGenerales.fechaSistema }}</span>
        </div>
        <div class="campo">
          <label>Operación POS:</label>
          <span>{{ datosGenerales.operacionPOS }}</span>
        </div>
        <div class="campo">
          <label>Tienda:</label>
          <span>{{ datosGenerales.tienda }}</span>
        </div>
      </div>

      <div class="campo-grupo">
        <div class="campo">
          <label>TPV:</label>
          <span>{{ datosGenerales.tpv }}</span>
        </div>
        <div class="campo">
          <label>Empleado:</label>
          <span>{{ datosGenerales.empleado }}</span>
        </div>
        <div class="campo">
          <label>Tipo de operación:</label>
          <span>{{ datosGenerales.tipoOperacion }}</span>
        </div>
        <div class="campo">
          <label>Naturaleza de la operación:</label>
          <span>{{ datosGenerales.naturalezaOperacion }}</span>
        </div>
      </div>

      <div class="campo-grupo">
        <div class="campo">
          <label>Tipo de documento:</label>
          <span>{{ datosGenerales.tipoDocumento }}</span>
        </div>
        <div class="campo">
          <label>Número documento:</label>
          <span>{{ datosGenerales.numeroDocumento }}</span>
        </div>
        <div class="campo" *ngIf="datosGenerales.cliente">
          <label>Cliente:</label>
          <span>{{ datosGenerales.cliente }}</span>
        </div>
        <div class="campo">
          <label>Concepto:</label>
          <span>{{ datosGenerales.concepto }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Desglose de Ingresos -->
  <div class="section-card">
    <div class="section-header">
      <h3>Desglose de ingresos</h3>
    </div>
    
    <div class="table-container">
      <table class="detalle-table">
        <thead>
          <tr>
            <th>Fecha línea</th>
            <th>Recibo</th>
            <th>Cód. concepto</th>
            <th>Descripción</th>
            <th>Categoría</th>
            <th>Tarifa</th>
            <th>Cantidad</th>
            <th>Monto</th>
            <th>Descuento</th>
            <th>IEPS</th>
            <th>IVA</th>
            <th>Total importe</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of detalleVentas">
            <td>{{ item.fechaLinea }}</td>
            <td>{{ item.factura }}</td>
            <td class="codigo-highlight">{{ item.codigo }}</td>
            <td class="descripcion-cell">{{ item.descripcion }}</td>
            <td>{{ item.categoria }}</td>
            <td>{{ item.tarifa }}</td>
            <td class="cantidad-cell">{{ item.cantidad }}</td>
            <td class="monto-cell">${{ item.pvp | number:'1.2-2' }}</td>
            <td class="monto-cell">${{ item.descuento | number:'1.2-2' }}</td>
            <td class="monto-cell">{{ item.ieps | number:'1.2-2' }}%</td>
            <td class="monto-cell">{{ item.iva | number:'1.2-2' }}%</td>
            <td class="total-cell">${{ item.totalImporte | number:'1.2-2' }}</td>
          </tr>
        </tbody>
        <tfoot>
          <tr class="total-row">
            <td colspan="11" class="total-label">Total:</td>
            <td class="total-amount">${{ totalGeneral | number:'1.2-2' }}</td>
          </tr>
        </tfoot>
      </table>
    </div>
  </div>

  <!-- Desglose de Impuestos -->
  <div class="section-card">
    <div class="section-header">
      <h3>Desglose de impuestos</h3>
    </div>
    
    <div class="table-container">
      <table class="impuestos-table">
        <thead>
          <tr>
            <th>Tipo de impuestos</th>
            <th>Base imponible</th>
            <th>Cuota impuestos especiales</th>
            <th>Cuota IVA</th>
            <th>Total importe</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let impuesto of detalleImpuestos">
            <td class="tipo-impuesto">{{ impuesto.tipo }}</td>
            <td class="monto-cell">${{ impuesto.baseImponible | number:'1.2-2' }}</td>
            <td class="monto-cell">${{ impuesto.cuotaEspecial | number:'1.2-2' }}</td>
            <td class="monto-cell">${{ impuesto.cuotaIVA | number:'1.2-2' }}</td>
            <td class="total-cell">${{ impuesto.totalImporte | number:'1.2-2' }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Resumen final -->
  <div class="resumen-final">
    <div class="resumen-card">
      <h4>Resumen de la operación</h4>
      <div class="resumen-item">
        <span class="label">Total de ingresos:</span>
        <span class="amount">${{ totalGeneral | number:'1.2-2' }}</span>
      </div>
      <div class="resumen-item">
        <span class="label">Fecha de registro:</span>
        <span class="date">{{ datosGenerales.fechaHora }}</span>
      </div>
      <div class="resumen-item">
        <span class="label">Estado:</span>
        <span class="status status-completed">Completado</span>
      </div>
    </div>
  </div>
</div>